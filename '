#include "basic_scene.h"


#include <RTPS.h>

#include <QObject>
#include <QOpenGLContext>


using namespace rtps;

BasicScene::BasicScene()
    :max_num(10000) ,
     dt(0.003)
{
    max_num = nlpo2(max_num);
}

void BasicScene::initialize()
{

    Domain *domain = new Domain(float4(-2.5, -2.5, -2.5, 0), float4(2.5, 2.5, 2.5, 0));
    settings = new RTPSettings(RTPSettings::SPH, max_num, dt, domain); 
    settings->setRenderType(RTPSettings::RENDER);
    settings->setRadiusScale(0.4);
    settings->setBlurScale(1.0);
    settings->setUseGLSL(1);
    settings->SetSetting("sub_intervals", 1);
    settings->SetSetting("render_texture", "firejet_blast.png");
    settings->SetSetting("render_frag_shader", "sprite_tex_frag.glsl");
    settings->SetSetting("render_use_alpha", true);
    settings->SetSetting("render_alpha_function", "add");
    settings->SetSetting("lt_increment", -.00);
    settings->SetSetting("lt_cl", "lifetime.cl");
    ps = new RTPS(settings);
}

void BasicScene::update(float t)
{
    Q_UNUSED(t);
}

void BasicScene::render()
{
    glClear(GL_COLOR_BUFFER_BIT);

}

void BasicScene::resize(int width, int height)
{
     glViewport(0, 0, width, height);
}


